---

copyright:
  years: 2015, 2019
lastupdated: "2019-05-02"

keywords: authentication, basic authentication, cookie authentication

subcollection: cloudant

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}
{:tip: .tip}
{:note: .note}
{:important: .important}
{:deprecated: .deprecated}

<!-- Acrolinx: 2018-05-31 -->

# Authentication
{: #authentication}

Authentication means proving who you are.
It is typically done by providing your user credentials for verification.
{: shortdesc}

You can provide your credentials (authenticate) in two ways for {{site.data.keyword.cloudantfull}}:

-	[Basic authentication](/docs/services/Cloudant?topic=cloudant-authentication#basic-authentication)
-	[Cookie authentication](/docs/services/Cloudant?topic=cloudant-authentication#cookie-authentication)

Basic authentication is similar to showing an ID at a door to be checked every time that you want to enter.
Cookie authentication is similar to having a key to the door so that you can let yourself in whenever you want.
Within {{site.data.keyword.cloudant_short_notm}},
the key is a cookie that is named `AuthSession`.

When you create or use performance-critical {{site.data.keyword.cloudant_short_notm}} applications, cookie authentication has more benefits when compared with Basic authentication. Therefore, use cookie authentication whenever possible.
{: note}

## Basic authentication
{: #basic-authentication}

To use Basic authentication,
pass your credentials as part of every request.
You pass your credentials by adding an `Authorization` header to the request.

The header contains the authentication scheme (`Basic`),
followed by the [BASE64 ![External link icon](../images/launch-glyph.svg "External link icon")](https://en.wikipedia.org/wiki/Base64){: new_window} encoding of a string created by concatenating:

-	Your user name
-	The `:` character
-	Your password

In practice,
many application libraries that are used for creating HTTP requests can do this encoding for you.

*Example including basic authentication credentials in a request, by using HTTP:*

```http
GET /db/document HTTP/1.1
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
```
{: codeblock}

*Example including basic authentication credentials in a request, by using the command line:*

```sh
curl https://$ACCOUNT:$PASSWORD@$ACCOUNT.cloudant.com
```
{: codeblock}

<!--

*Example including basic authentication credentials in a request, using Javascript:*

```javascript
var nano = require('nano');
var account = nano("https://$ACCOUNT:$PASSWORD@$ACCOUNT.cloudant.com");
account.request(function (err, body) {
	if (!err) {
		console.log(body);
	}
});
```
{: codeblock}

-->

*Example including basic authentication credentials in a request, by using Python:*

```python
import cloudant
url = "https://{0}:{1}@{0}.cloudant.com".format(USERNAME, PASSWORD)
account = cloudant.Account(url)
ping = account.get()
print ping.status_code
# Expected result code: 200
```
{: codeblock}

## Cookie authentication
{: #cookie-authentication}

Cookie authentication requires that you supply a valid user name and password once,
at the start of a series of tasks (the session).
The response includes a cookie,
generated by the server,
that confirms you successfully authenticated.
After it is created,
you send the cookie with all requests that require you to be authenticated.

The presence of a valid cookie is sufficient to ensure that your call request is processed
rather than rejected immediately as unauthenticated.
You can use the cookie until it expires.

Using the `DELETE` method logs out the user because the cookie is considered expired by the server.

Method | Path | Description | Headers | Form Parameters
-------|------|-------------|---------|----------------------
`POST` | `/_session` | Do cookie-based user login | `Content-Type: application/x-www-form-urlencoded` | name, password
`GET` | `/_session` | Returns cookie-based login user information | AuthSession cookie returned by POST request | —
`DELETE` | `/_session` | Logout cookie-based user | AuthSession cookie returned by POST request | —

### Requesting a cookie
{: #requesting-a-cookie}

With cookie authentication,
you use your credentials to acquire a cookie.
Acquire a cookie by sending a `POST` request to `/_session`.

*Example of requesting a cookie, by using HTTP:*

```http
POST /_session HTTP/1.1
Content-Length: 32
Content-Type: application/x-www-form-urlencoded
Accept: */*
name=USERNAME&password=PASSWORD
```
{: codeblock}

*Example of requesting a cookie, by using the command line:*

```sh
curl https://$ACCOUNT.cloudant.com/_session \
	-X POST \
	-c /path/to/cookiefile
	-d "name=$ACCOUNT&password=$PASSWORD"
```
{: codeblock}

<!--

*Example of requesting a cookie, using Javascript:*

```javascript
var nano = require('nano');
var cloudant = nano("https://"+$ACCOUNT+".cloudant.com");
var cookies = {}
cloudant.auth($ACCOUNT, $PASSWORD, function (err, body, headers) {
	if (!err) {
		cookies[$ACCOUNT] = headers['set-cookie'];
		cloudant = nano({
			url: "https://"+$ACCOUNT+".cloudant.com",
			cookie: cookies[$ACCOUNT] 
		});
		// ping to ensure we're logged in
		cloudant.request({
			path: 'test_porter'
		}, function (err, body, headers) {
			if (!err) {
				console.log(body, headers);
			}
		});
	}
});
```
{: codeblock}

-->

*Example of requesting a cookie, by using Python:*

```python
import cloudant
account = cloudant.Account(USERNAME)
login = account.login(USERNAME, PASSWORD)
print login.status_code
# Expected result code: 200
logout = account.logout()
print logout.status_code
# Expected result code: 200
all_dbs = account.all_dbs()
print all_dbs.status_code
# Expected result code: 401
```
{: codeblock}

If the credentials you supply in your cookie request are valid,
the response contains a cookie that remains active for 24 hours.

*Reply to request for a cookie:*

```http
200 OK
Cache-Control: must-revalidate
Content-Length: 42
Content-Type: text/plain; charset=UTF-8
Date: Mon, 11 Nov 2016 12:43:15 GMT
server: CouchDB/1.0.2 (Erlang OTP/R14B)
Set-Cookie: AuthSession="d2FybWFuYTo1ODI1QkM2NzpZelovo2epvx9cfaDdxJGNLuzBzw"; Expires=Sat, 12-Nov-2016 12:43:15 GMT; Max-Age=86400; Path=/; HttpOnly; Version=1
x-couch-request-id: a638431d
```
{: codeblock}

*JSON part of response:*

```json
{
	"ok": true,
	"name": "USERNAME",
	"roles": []
}
```
{: codeblock}

### Getting cookie-authenticated information
{: #getting-cookie-authenticated-information}

When a cookie is set,
information about the authenticated user can be retrieved with a `GET` request.

*Example request for cookie information, by using HTTP:*

```http
GET /_session HTTP/1.1
Cookie: AuthSession="d2FybWFuYTo1ODI1QkM2NzpZelovo2epvx9cfaDdxJGNLuzBzw"; Expires=Sat, 12-Nov-2016 12:43:15 GMT; Max-Age=86400; Path=/; HttpOnly; Version=1
Accept: application/json
```
{: codeblock}

*Example request for cookie information, by using the command line:*

```sh
curl https://$ACCOUNT.cloudant.com/_session \
	-X GET \
	-b /path/to/cookiefile
```
{: codeblock}

The response contains the user name,
the user's roles,
and which authentication mechanism was used.

*Example response to request for cookie information:*

```json
{
	"userCtx": {
		"roles": [
			"_admin",
			"_reader",
			"_writer"
		],
		"name": "USERNAME"
	},
	"ok": true,
	"info": {
		"authentication_db": "_users",
		"authentication_handlers": [
			"delegated",
			"cookie",
			"default",
			"local"
		],
		"authenticated": "cookie"
	}
}
```
{: codeblock}

### Deleting a cookie
{: #deleting-a-cookie}

You can end the cookie authentication session by sending a `DELETE` request to the same URL used to create the cookie.
The `DELETE` request must include the cookie that you want to delete.

*Example cookie `DELETE` request, by using HTTP:*

```http
DELETE /_session HTTP/1.1
Cookie: AuthSession="d2FybWFuYTo1ODI1QkM2NzpZelovo2epvx9cfaDdxJGNLuzBzw"; Expires=Sat, 12-Nov-2016 12:43:15 GMT; Max-Age=86400; Path=/; HttpOnly; Version=1
Accept: application/json
```
{: codeblock}

*Example cookie `DELETE` request, by using the command line:*

```sh
curl https://$ACCOUNT.cloudant.com/_session \
	-X DELETE \
	-b /path/to/cookiefile
```
{: codeblock}

The response confirms deletion of the session,
and sets the `AuthSession` Cookie to `""`.

*Example response to cookie `DELETE` request:*

```http
200 OK
Cache-Control: must-revalidate
Content-Length: 12
Content-Type: application/json
Date: Mon, 11 Nov 2016 14:06:12 GMT
server: CouchDB/1.0.2 (Erlang OTP/R14B)
Set-Cookie: AuthSession=""; Expires=Fri, 02-Jan-1970 00:00:00 GMT; Max-Age=0; Path=/; HttpOnly; Version=1
x-couch-request-id: e02e0333
```
{: codeblock}

*JSON part of response:*

```json
{
	"ok": true
}
```
{: codeblock}
