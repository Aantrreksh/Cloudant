---

copyright:
  years: 2017
lastupdated: "2017-07-11"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}

<!-- Acrolinx: 2017-05-10 -->

# 재해 복구 및 백업

데이터는 중요하며 소중합니다. 사용자는 데이터를 보호하고, 안전 및 가용성을 보장하며 무결성을 유지하는 데 도움을 주고자 합니다.
Cloudant에서는 데이터를 보호하고 애플리케이션의 가동 상태를 유지하는 데 도움을 주는 몇 가지 방법을 제공합니다.
{:shortdesc}

이러한 보호 기능 중 일부는 자동입니다. 다른 형태의 보호 기능의 경우,
Cloudant는 사용자가 고유의 고가용성 및 재해 복구 기능을 구축하는 데 도움을 주는
지원 도구를 제공합니다. 

이 문서는 Cloudant에서 제공하는 자동 기능 및 지원 도구에 대한 개요를 제공합니다. 

## 보호의 유형 및 레벨

사용자가 원하는 보호의 유형은 해결하려는 문제점에 따라 달라질 수 있습니다. 

예를 들면, 사용자는 시스템 내의 몇몇 하드웨어가 고장나도 데이터에 액세스할 수 있도록 높은 레벨의 데이터 가용성을 원할 수 있습니다.
이것이 '고가용성'(HA) 요구사항입니다. 이는 하드웨어 장애 이후 가능한 가장 높은 수준의 지속적 데이터 가용성을 제공함을 의미합니다.
운영이 영향을 받기 전까지 허용할 수 있는 장애 레벨은 각 HA 기술에 따라 다릅니다. 

또는, 데이터를 쉽고 빠르게 백업하고 복원하는 방법을 원할 수도 있습니다.
예를 들면, 심각하거나 광범위한 하드웨어 장애가 발생한 후 가능한 한 빠르게
대체 시스템에서 모든 데이터를 사용 가능하게 만들려 할 수 있습니다.
이것이 '재해 복구'(DR) 요구사항입니다. 재해는 일반적으로 하나 이상의 위치에서
데이터베이스를 더 이상 사용할 수 없는 상태를 의미합니다. 예를 들면,
정전은 특정 데이터베이스 내의 모든 시스템에 장애를 발생시킬 수 있습니다.
또한 대규모 네트워크 장애는 클러스터 내의 모든 시스템이 정상 작동하지만
여기에 접속할 수 없음을 의미합니다. 

HA 또는 DR 요구사항의 해결은 보통 문제점을 좀 더 일반적인 요구사항으로 단순화하면서 시작됩니다.
요구사항을 식별할 때는 일반적인 요구를 해결하는 데 도움을 주는 도구 및 기능을 적용할 수 있습니다.
이러한 도구 및 기능이 모이면 사용자의 HA 또는 DR 요구사항을 해결할 수 있게 됩니다. 

>	**참고**: 각 도구 및 기능은 서로 다른 보호 레벨을 제공합니다.
	각 기능은 사용자의 HA 또는 DR 요구사항을 해결하는 데 더 적합하거나 덜 적합할 수 있습니다. 

Cloudant에서는 일반적인 요구사항을 해결하는 몇 가지 도구 및 기능을 제공합니다. 

1.	[지역 내 자동 데이터 중복성](#in-region-automatic-data-redundancy)이라고도 하는, 단일 지역 내의 데이터 중복성
2.	[재해 복구를 위한 교차 지역 중복성](#cross-region-redundancy-for-disaster-recovery)이라고도 하는, 교차 지역 데이터 중복성 및 장애 복구
3.	'기존' [데이터베이스 백업 및 복구](#database-backup-and-recovery)를 사용한, 특정 시점 복원을 위한 특정 시점 스냅샷 백업

## 지역 내 자동 데이터 중복성

하나의 Cloudant 계정 내에서, 데이터는 내부 및 자동 프로세스를 사용하여 3중으로 저장됩니다. 이 내부 데이터 복제를 사용으로 설정하기 위해 추가 작업을 수행할 필요는 없습니다. 

지역 내 데이터 중복성은 고가용성 보호를 가능하게 합니다. 특히,
지역 내 데이터 중복성은 지역 내 하드웨어 장애에 대해 데이터 보호 기능을 제공합니다.
지역 내의 특정 하드웨어에 장애가 발생하면, 해당 장치에 저장된 데이터의 사본만
사용할 수 없게 됩니다. Cloudant에서 자동으로 지역 내의 다른 하드웨어 장치에 있는
데이터의 사본으로 요청을 라우팅하므로 사용자의 애플리케이션은 계속해서
사용 가능한 상태를 유지합니다. 한편, 시스템에 대한 자동 모니터링에서는
하드웨어 장치 장애를 발견하고 조치와 완전 중복성 복원을 위한 후속 조치가
필요함을 알립니다. 

Cloudant 계정은 하나의 지역에 위치해 있습니다. 이 특성은 사용자가 자신의 계정에 저장하는 모든 데이터가
해당 지역에서 호스팅되는 여러 서버에 각각 저장되어 있음을 의미합니다. 

지역 내 자동 데이터 중복성의 한계는 다음과 같습니다. 

1.	하나의 지역 내에서만 보호를 제공합니다. 
2.	현재 데이터를 유지보수합니다. 

계정과 연관된 하나의 지역보다 많은 지역을 이용하여 보호를 제공하려면 [재해 복구를 위한 교차 지역 중복성](#cross-region-redundancy-for-disaster-recovery)을 사용하십시오. 

애플리케이션에 의해 데이터에 가해진 변경사항을 감사할 수 있도록 하는 등과 같이 데이터의 '히스토리'에 대한 보호를 제공하려면
[데이터베이스 백업 및 복구](#database-backup-and-recovery) 도구에 의해 작성된 데이터 스냅샷을 사용하십시오. 

간단히 말해, 지역 내 데이터 중복성은 지역 내의 한 시스템에 영향을 주는 장애에 대한 내성을 제공하여 고가용성 기능을 가능하게 합니다. 

## 재해 복구를 위한 교차 지역 중복성

Cloudant 복제 기능은 애플리케이션에 유연한 재해 복구 기능을 빌드하도록 도와줍니다. 재해 복구를 가능하게 하는 기본적인 방법은 Cloudant 복제를 사용하여 여러 지역에 중복성을 구축하는 것입니다.
이렇게 하면 애플리케이션이 하나 이상의 지역이 사용 불가능한 상황을 견딜 수 있게 됩니다. 

교차 지역 중복성을 구축하는 기본 단계는 다음과 같습니다. 

1.  둘 이상의 지역에 Cloudant 계정을 작성하십시오. 
2.  필요에 따라 각 지역에 데이터베이스를 작성하십시오. 
3.  교차 지역 중복성을 사용하여 저장해야 하는 데이터베이스의 경우에는 각 계정의 해당 데이터베이스 간에 양방향 연속 복제를 설정하십시오. 
4.  환경이 활성-수동인지 또는 활성-활성 구성인지에 따라 데이터 요청이 라우팅되도록 애플리케이션을 디자인하고 구현하십시오.
  이를 설정하는 데 대한 자세한 안내서는 [여기](active-active.html)에 있습니다. 

여러 지역에서 데이터에 대해 작업하도록 애플리케이션을 디자인할 때는 다음 항목을 고려하십시오. 

* 애플리케이션은 자신의 실제 위치와 가장 가까운 위치에서 호스팅되는 데이터베이스로 요청을 전송할 수 있습니다.
  이러한 접근성 이용은 네트워크 대기 시간을 줄이고 응답 시간을 향상시킬 수 있습니다.
  이 구성을 '활성-활성' 방법이라고 합니다. 이 방법의 특징은 여러 데이터 사본의 동시 사용입니다.
  활성-활성 구성에서 작동하는 애플리케이션에는 여러 데이터 사본으로 인한 문제점을 해결하기 위한
  [충돌 처리 전략](mvcc.html#distributed-databases-and-conflicts)이 있어야 합니다. 
* 애플리케이션은 기본적으로 하나의 영역으로부터 데이터를 요청할 수 있습니다. 해당 지역이
  사용 불가능한 경우 애플리케이션은 다른 지역으로부터의 데이터 요청으로 전환할 수 있습니다.
  이 구성을 '활성-수동' 방법이라고 합니다. 이 방법의 특성은 한 번에 하나의 데이터 세트만 사용한다는 점입니다. 
* 애플리케이션은 모든 데이터 쓰기 요청에 하나의 계정을 사용하고,
  다른 위치는 읽기 전용 요청에만 사용되는 하이브리드 구성을 사용할 수 있습니다.
  이 구성은 읽기에 대한 활성-활성 구성입니다. 
* 재해 시나리오에서, 애플리케이션은 아직 온라인 상태인 지역에서
  호스팅되는 계정에 액세스하도록 데이터 요청을 다시 라우팅해야 합니다.
  이 요구사항은 애플리케이션이 특정 지역의 가용성 여부를 발견한 후
  데이터 요청을 다시 라우팅할 수 있어야 함을 의미합니다. 

간단히 말해, 교차 지역 중복성은 고가용성 기능과 유사하지만 전체 지역에 영향을 주는 장애에 적용됩니다.
그러나 교차 중복성 구성에서 애플리케이션이 올바르게 작동하도록 구성하면 진정한 재해 복구 기능을 제공할 수 있습니다.
이는 일정 시간 동안 한 지역의 데이터가 사용 불가능한 경우에도 애플리케이션이 계속해서 작동할 수 있기 때문입니다.
Cloudant 복제는 지역 간 데이터 동기화에 도움을 줍니다. 그러나 사용자의 애플리케이션은 다른 지역에 저장된
데이터의 사본으로 '장애 복구'할 수 있어야 합니다. 

## 데이터베이스 백업 및 복구

[지역 내 자동 데이터 중복성](#in-region-automatic-data-redundancy)은 애플리케이션에 데이터에 대한 고가용성 액세스를 제공합니다.
[재해 복구를 위한 교차 지역 중복성](#cross-region-redundancy-for-disaster-recovery)은 애플리케이션에 재해로부터 복구할 수 있는 수단을 제공합니다.
그러나 이들 두 기능은 모두 데이터의 _현재_ 사본에 대한 액세스를 유지하는 데만 초점을 맞추고 있습니다. 

사람과 애플리케이션은 실수로 데이터를 의도하지 않은 방향으로 변경할 수 있습니다. 애플리케이션에는 몇 가지 보호 기능을
구현할 수 있지만, 종종 원하지 않는 변경사항이 적용되는 경우가 있습니다. 이러한 경우에는 이전 시점으로 데이터를
복구할 수 있는 기능이 있으면 유용합니다. 데이터베이스 백업은 이 요구사항을 지원합니다. 

고가용성 및 재해 복구 기능으로 데이터를 보호하는 것 외에, 정기적인 간격으로 별도의 위치에 데이터베이스 데이터를 덤프하는 것을 고려하십시오.
이러한 백업이 완전하며 올바른지 확인하고 테스트하십시오. 

Cloudant에서는 데이터베이스에 있는 JSON 컨텐츠를 하나의 파일에 덤프하고, 나중에 이러한 파일로부터 데이터베이스를 복원하는 데 도움을 주는 도구를 지원합니다. 

구체적으로, Cloudant에서 지원하는 도구는 다음 작업을 수행하는 데 도움을 줍니다. 

*	추가 처리를 수행하거나 오프사이트 스토리지에 저장하는 데 적합하도록 전체 데이터베이스를 하나의 파일에 백업합니다. 
*	백업 파일에 포함된 이전 상태로부터 전체 데이터베이스를 복원합니다. 

<strong style="color:red;">주의하십시오!</strong> Cloudant에서 지원하는 도구에는 다음 제한사항이 있습니다.  

*	`_security` 설정은 이 도구에 의해 백업되지 않습니다. 
*	첨부 파일은 이 도구에 의해 백업되지 않습니다. 
*	이 백업은 정확한 "특정 시점" 스냅샷이 아닙니다.
  이는 데이터베이스의 문서가 일괄처리로 검색되지만
  다른 애플리케이션에서 동시에 해당 문서를 업데이트하고 있을 수 있기 때문입니다.
  따라서, 첫 번째 일괄처리와 마지막 일괄처리를 읽을 때 데이터베이스 내의 데이터가 변경될 수 있습니다. 
*	디자인 문서에 포함된 인덱스 정의는 백업되지만
	데이터가 복원되면 인덱스를 다시 빌드해야 합니다.
	복원되는 데이터의 양에 따라 이 다시 빌드 작업에는
 상당한 시간이 소요될 수 있습니다. 

<div id="conclusion"></div>

## 다음 단계

더 복잡한 데이터 보호 전략을 사용할 수 있도록 하기 위해 기본 Cloudant 기능 및 지원 도구로 빌드되는 애플리케이션을 개발할 수 있습니다. 

시나리오 예는 다음 항목을 포함합니다. 

*	이전 상태로부터 하나의 문서를 복원합니다. 
*	시간이 많이 지난 후에도 복원할 수 있도록 여러 이전 문서 상태를 저장합니다. 
*	비용 효율적인 보존을 위해 더 저렴한 스토리지로 이전 데이터를 마이그레이션합니다. 

백업 도구는 오픈 소스 node.js 명령행 애플리케이션 및 라이브러리로 구성되어 있습니다.
이는 [NPM ![외부 링크 아이콘](../images/launch-glyph.svg "외부 링크 아이콘")](https://www.npmjs.com/package/@cloudant/couchbackup){:new_window}에 있습니다. 

도구를 데이터 보호 전략에 통합하는 방법에 대한 아이디어와 이를 보여주는 예는 [백업 쿡북 안내서](backup-cookbook.html)를 참조하십시오. 
